<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>canvas1</title>


</head>
<body>
<button onclick="doInput('inputobj')">uoqu</button>
<canvas id="cvs" style="position: absolute;left: 0;top: 0;right: 0;bottom: 0;margin: auto;border: 1px solid #333333;"></canvas>
</body>
<script>
    var cvs = document.querySelector('#cvs');

    cvs.width=300;
    cvs.height=400;
    var ctx = cvs.getContext('2d');
    function readFile(){
        var file = this.files[0];
        if(!/image\/\w+/.test(file.type)){
            alert("请确保文件为图像类型");
            return false;
        }
        var reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = function(e){
            var img = new Image;
            img.src=this.result;
            img.onload = function(){
                ctx.drawImage(img,0,0,300,400);
            }
        }
    }
    function doInput(id){
        var inputObj = document.createElement('input');
        inputObj.addEventListener('change',readFile,false);
        inputObj.type = 'file';
        inputObj.accept = 'image/*';
        inputObj.id = id;
        inputObj.click();
        var d='http://test.zhangkuo.net/advmessage/advimage/saveImgJsonP.action?advid=30380&imagebase64=1235&resultid='
    }


</script>
</html>