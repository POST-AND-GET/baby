var Ajax;if(!Ajax||typeof(Ajax)!="object"){Ajax={};}Ajax.ajaxSettings={url:location.href,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){try{return new XMLHttpRequest();}catch(e){try{return new ActiveXObject("Msxml2.XMLHTTP");}catch(e){return new ActiveXObject("Microsoft.XMLHTTP");}}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}};Ajax.setup=function(settings){Ajax._extend(Ajax.ajaxSettings,settings);};Ajax.send=function(origSettings){function getType(obj){return obj===null?String(obj):class2type[toString.call(obj)]||"object";}function isFunction(obj){return getType(obj)==="function";}function isArray(obj){return getType(obj)==="array";}function isEmptyObject(obj){for(var name in obj){return false;}return true;}function param(a){var s=[],name,add=function(key,value){value=isFunction(value)?value():value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);};if(isArray(a)){for(name in a){add(name,a[name]);}}else{for(var prefix in a){buildParams(prefix,a[prefix],add);}}return s.join("&").replace(r20,"+");}function buildParams(prefix,obj,add){if(isArray(obj)&&obj.length){for(var i in obj){var v=obj[i];if(rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"||isArray(v)?i:"")+"]",v,add);}}}else if(obj!==null&&typeof(obj)==="object"){if(isEmptyObject(obj)){add(prefix,"");}else{for(var k in obj){var v=obj[k];buildParams(prefix+"["+k+"]",v,add);}}}else{add(prefix,obj);}}function globalEval(data){if(data&&rnotwhite.test(data)){var head=document.getElementsByTagName("head")[0]||document.documentElement,script=document.createElement("script");script.type="text/javascript";if(scriptEval){script.appendChild(document.createTextNode(data));}else{script.text=data;}head.insertBefore(script,head.firstChild);head.removeChild(script);}}function now(){return(new Date()).getTime();}function handleError(s,xhr,status,e){if(s.error){s.error.call(s.context,xhr,status,e);}}function handleSuccess(s,xhr,status,data){if(s.success){s.success.call(s.context,data,status,xhr);}}function handleComplete(s,xhr,status){if(s.complete){s.complete.call(s.context,xhr,status);}}function httpSuccess(xhr){try{return!xhr.status&&location.protocol==="file:"||xhr.status>=200&&xhr.status<300||xhr.status===304||xhr.status===1223;}catch(e){}return false;}function httpNotModified(xhr,url){var lastModified=xhr.getResponseHeader("Last-Modified"),etag=xhr.getResponseHeader("Etag");if(lastModified){lastModified[url]=lastModified;}if(etag){etag[url]=etag;}return xhr.status===304;}function httpData(xhr,type,s){var ct=xhr.getResponseHeader("content-type")||"",xml=type==="xml"||!type&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==="parsererror"){throw"parsererror";}if(s&&s.dataFilter){data=s.dataFilter(data,type);}if(typeof data==="string"){if(type==="json"||!type&&ct.indexOf("json")>=0){data=JSON.parse(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){globalEval(data);}}return data;}function noop(){}var root=document.documentElement,script=document.createElement("script"),id="script"+now(),scriptEval=false;script.type="text/javascript";try{script.appendChild(document.createTextNode("window."+id+"=1;"));}catch(e){}root.insertBefore(script,root.firstChild);if(window[id]){scriptEval=true;delete window[id];}root.removeChild(script);var class2type={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"},jsc=now(),rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rinput=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rnoContent=/^(?:GET|HEAD)$/,rbracket=/\[\]$/,jsre=/\=\?(&|$)/,rquery=/\?/,rts=/([?&])_=[^&]*/,rurl=/^(\w+:)?\/\/([^\/?#]+)/,r20=/%20/g,rhash=/#.*$/,rnotwhite=/\S/,lastModified={},etag={},s=Ajax._extend(Ajax.ajaxSettings,origSettings),jsonp,status,data,type=s.type.toUpperCase(),noContent=rnoContent.test(type);s.url=s.url.replace(rhash,"");s.context=origSettings&&origSettings.context!==null?origSettings.context:s;if(s.data&&s.processData&&typeof s.data!=="string"){s.data=param(s.data);}if(s.dataType==="jsonp"){if(type==="GET"){if(!jsre.test(s.url)){s.url+=(rquery.test(s.url)?"&":"?")+(s.jsonp||"callback")+"=?";}}else if(!s.data||!jsre.test(s.data)){s.data=(s.data?s.data+"&":"")+(s.jsonp||"callback")+"=?";}s.dataType="json";}if(s.dataType==="json"&&(s.data&&jsre.test(s.data)||jsre.test(s.url))){jsonp=s.jsonpCallback||("jsonp"+jsc++);if(s.data){s.data=(s.data+"").replace(jsre,"="+jsonp+"$1");}s.url=s.url.replace(jsre,"="+jsonp+"$1");s.dataType="script";var customJsonp=window[jsonp];window[jsonp]=function(tmp){if(isFunction(customJsonp)){customJsonp(tmp);}else{window[jsonp]=undefined;try{delete window[jsonp];}catch(jsonpError){}}data=tmp;handleSuccess(s,xhr,status,data);handleComplete(s,xhr,status,data);if(head){head.removeChild(script);}};}if(s.data&&noContent){s.url+=(rquery.test(s.url)?"&":"?")+s.data;}var parts=rurl.exec(s.url),remote=parts&&(parts[1]&&parts[1].toLowerCase()!==location.protocol||parts[2].toLowerCase()!==location.host);if(s.dataType==="script"&&type==="GET"&&remote){var head=document.getElementsByTagName("head")[0]||document.documentElement;var script=document.createElement("script");if(s.scriptCharset){script.charset=s.scriptCharset;}script.src=s.url;if(!jsonp){var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;handleSuccess(s,xhr,status,data);handleComplete(s,xhr,status,data);script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script);}}};}head.insertBefore(script,head.firstChild);return undefined;}var requestDone=false;var xhr=s.xhr();if(!xhr){return;}if(s.username){xhr.open(type,s.url,s.async,s.username,s.password);}else{xhr.open(type,s.url,s.async);}try{if((s.data!==null&&!noContent)||(origSettings&&origSettings.contentType)){xhr.setRequestHeader("Content-Type",s.contentType);}if(s.ifModified){if(lastModified[s.url]){xhr.setRequestHeader("If-Modified-Since",lastModified[s.url]);}if(etag[s.url]){xhr.setRequestHeader("If-None-Match",etag[s.url]);}}if(!remote){xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");}xhr.setRequestHeader("Accept",s.dataType&&s.accepts[s.dataType]?s.accepts[s.dataType]+", */*; q=0.01":s.accepts._default);}catch(headerError){}if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){xhr.abort();return false;}var onreadystatechange=xhr.onreadystatechange=function(isTimeout){if(!xhr||xhr.readyState===0||isTimeout==="abort"){if(!requestDone){handleComplete(s,xhr,status,data);}requestDone=true;if(xhr){xhr.onreadystatechange=noop;}}else if(!requestDone&&xhr&&(xhr.readyState===4||isTimeout==="timeout")){requestDone=true;xhr.onreadystatechange=noop;status=isTimeout==="timeout"?"timeout":!httpSuccess(xhr)?"error":s.ifModified&&httpNotModified(xhr,s.url)?"notmodified":"success";var errMsg;if(status==="success"){try{data=httpData(xhr,s.dataType,s);}catch(parserError){status="parsererror";errMsg=parserError;}}if(status==="success"||status==="notmodified"){if(!jsonp){handleSuccess(s,xhr,status,data);}}else{handleError(s,xhr,status,errMsg);}if(!jsonp){handleComplete(s,xhr,status,data);}if(isTimeout==="timeout"){xhr.abort();}if(s.async){xhr=null;}}};try{var oldAbort=xhr.abort;xhr.abort=function(){if(xhr){Function.prototype.call.call(oldAbort,xhr);}onreadystatechange("abort");};}catch(abortError){}if(s.async&&s.timeout>0){setTimeout(function(){if(xhr&&!requestDone){onreadystatechange("timeout");}},s.timeout);}try{xhr.send(noContent||s.data===null?null:s.data);}catch(sendError){handleError(s,xhr,null,sendError);handleComplete(s,xhr,status,data);}if(!s.async){onreadystatechange();}return xhr;};Ajax._extend=function(){var target=arguments[0]||{},i,length=arguments.length,options,src,copy,clone,name;for(i=1;i<length;++i){if((options=arguments[i])!==null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}if(typeof(copy)=="object"){clone=(src&&typeof(src)=="object"?src:{});target[name]=Ajax._extend(clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}return target;};
